<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>New Sale</title>

	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
		integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Roboto+Slab&display=swap" rel="stylesheet" />
	<link href="https://fonts.googleapis.com/css?family=Inter&display=swap" rel="stylesheet" />
	<link href="../css/newSale.css" rel="stylesheet">

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
		integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"
		integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V"
		crossorigin="anonymous"></script>
	<script src="https://code.jquery.com/jquery-3.4.1.min.js" type="text/javascript"></script>
	<script type="text/javascript">
		// ensure we are logged in
		$.get('../php/checkLogin.php', function () { });

		// prepare form submittal function
		$(document).ready(function () {
			$("#add-cust-form").submit(function (event) {
				// prevent the form from doing default behavior
				event.preventDefault();

				// get vars
				var fname = $("#cust-fname").val();
				var lname = $("#cust-lname").val();
				var phone = $("#cust-phone").val();
				var email = $("#cust-email").val();
				var address = $("#cust-address").val();

				//send vars
				$("#cust-form-message").load("../php/addCustomer.php", {
					'fname': fname,
					'lname': lname,
					'phone': phone,
					'email': email,
					'address': address
				});

				// reroute to window.location.href='customerGarage.html'
			});
		});
	</script>

	<style>
		.input-error {
			box-shadow: 0 0 5px red;
		}
	</style>
</head>

<body>
	<div class="v39_2">
		<div class="v43_29"></div><span class="v45_7">New Sale</span>
		<div class="name"></div>
		<div class="v44_30"></div>

		<form id="add-cust-form">
			<div class="v44_31">
				<input type="text" placeholder="First Name" id="cust-fname"><br>
				<input type="text" placeholder="Last Name" id="cust-lname"><br>
				<input type="text" placeholder="Phone Number" id="cust-phone"><br>
				<input type="text" placeholder="Address (optional)" id="cust-address"><br>
				<input type="text" placeholder="E-Mail Address (optional)" id="cust-email"><br>
				<p id="cust-form-message"></p>
			</div>

			<button class="v44_33" type="submit" name="submit">Add Customer</button>

		</form>



		<form id="search-cust-form">
			<div class="searchButton" id="searchButton">search</div>
			<input class="searchInput" type="text" name="search-input-fname" placeholder="First Name"><br>
			<input class="searchInput" type="text" name="search-input-lname" placeholder="Last Name"><br>
			<input class="searchInput" type="text" name="search-input-phone" placeholder="Phone"><br>
			<input class="searchInput" type="text" name="search-input-address" placeholder="Address"><br>
			<input class="searchInput" type="text" name="search-input-email" placeholder="Email"><br>

			<div class="searchResultBody">

				<table class="table table-hover" onclick="window.location.href='finalizeSale.php'">
					<thead>
						<tr>
							<th scope="col">id#</th>
							<th scope="col">First</th>
							<th scope="col">Last</th>
							<th scope="col">Phone</th>
							<th scope="col">Email</th>
							<th scope="col">City</th>
							<th scope="col">Zip</th>
							<th scope="col">Select</th>
						</tr>
					</thead>
					<tbody>

						<!-- 
                        example of how to get the bootstrap table to generate list using php (from my previous project). May be helpful!

                        <?php 
					
					if(isset($_GET['search'])){

						$search = $_GET['search'];
						$query = "select * from customers where concat(customerId,fname,lname,phone,email,city,zip) like '%$search%'";
						$results = mysqli_query($conn,$query);

						if(mysqli_num_rows($results) > 0){
							foreach($results as $items){
								?>
									<tr>
										<td><?= $items['customerId'];?></td>
										<td><?= $items['fname'];?></td>
										<td><?= $items['lname'];?></td>
										<td><?= $items['phone'];?></td>
										<td><?= $items['email'];?></td>
										<td><?= $items['city'];?></td>
										<td><?= $items['zip'];?></td>
										<td>
											<a href="finalizeSale.php?fname=<?php echo $items['customerId'];?>">Select</a>
										</td>
									</tr>


								<?php
							}
						}
						else{
							
							?>

							<tr>
								<td colspan="7">No record found...</td>
							</tr>
							<?php 
						}


					}
					?>
				-->


					</tbody>
				</table>
			</div>

			<div class="savedJobsButton" id="savedJobsText">Saved jobs</div>
		</form>

	</div>
</body>