<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>New Sale</title>

	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
		integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
	<link href="https://fonts.googleapis.com/css?family=Roboto+Slab&display=swap" rel="stylesheet" />
	<link href="https://fonts.googleapis.com/css?family=Inter&display=swap" rel="stylesheet" />
	<link href="../css/newSale.css" rel="stylesheet">

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
		integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"
		integrity="sha384-cuYeSxntonz0PPNlHhBs68uyIAVpIIOZZ5JqeqvYYIcEL727kskC66kF92t6Xl2V"
		crossorigin="anonymous"></script>
	<script src="https://code.jquery.com/jquery-3.4.1.min.js" type="text/javascript"></script>
	<script type="text/javascript">
		// ensure we are logged in
		$.get('../php/checkLogin.php', function () { });

		// prepare form submittal function
		$(document).ready(function () {
			$("#add-cust-form").submit(function (event) {
				// prevent the form from doing default behavior
				event.preventDefault();

				// get vars
				var fname = $("#cust-fname").val();
				var lname = $("#cust-lname").val();
				var phone = $("#cust-phone").val();
				var email = $("#cust-email").val();
				var address = $("#cust-address").val();

				//send vars
				$("#cust-form-message").load("../php/addCustomer.php", {
					'fname': fname,
					'lname': lname,
					'phone': phone,
					'email': email,
					'address': address
				});

				// reroute to window.location.href='customerGarage.html'
			});

			$("#search-cust-form").submit(function (event) {
				event.preventDefault();
				
				var fname = $("#search-fname").val();
				var lname = $("#search-lname").val();
				var phone = $("#search-phone").val();
				var email = $("#search-email").val();
				var address = $("#search-address").val();

				$("#search-results-table").load("../php/searchCustomer.php", {
					'fname': fname,
					'lname': lname,
					'phone': phone,
					'email': email,
					'address': address
				});
			});
		});
	</script>
</head>

<body>

	<header>
		<h1>New Sale</h1>
	</header>

	<main>
		<section>
			<form id="add-cust-form">
				<div class="form_box">
					<input type="text" placeholder="First Name" id="cust-fname"><br>
					<input type="text" placeholder="Last Name" id="cust-lname"><br>
					<input type="text" placeholder="Phone Number" id="cust-phone"><br>
					<input type="text" placeholder="Address (optional)" id="cust-address"><br>
					<input type="text" placeholder="E-Mail Address (optional)" id="cust-email"><br>
					<p id="cust-form-message"></p>
				</div>

				<button class="bottomButton" type="submit" name="submit">Add Customer</button>

			</form>
		</section>

		<section>
			<form id="search-cust-form">
				<div id="search-bar">
					<button type="submit" id="searchButton">Search</button>
					<div class="grid_container">
						<input type="text" id="search-fname" placeholder="First Name">
						<input type="text" id="search-lname" placeholder="Last Name">
						<input type="text" id="search-phone" placeholder="Phone">
						<input type="text" id="search-email" placeholder="Email">
						<input type="text" id="search-address" placeholder="Address">
					</div>
				</div>
			</form>

			<div class="searchResultBody">
				<table class="table table-hover">
					<thead>
						<tr>
							<th scope="col">First</th>
							<th scope="col">Last</th>
							<th scope="col">Phone</th>
							<th scope="col">Email</th>
							<th scope="col">Address</th>
						</tr>
					</thead>
					<tbody id="search-results-table"></tbody>
				</table>
			</div>

			<button class="bottomButton">Saved jobs</button>
		</section>

	</main>
</body>